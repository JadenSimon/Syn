/// <reference lib="es2015" />

async function foo() {
    return 1
}

const v = foo() + foo()
if (v != 2) {
    throw `not 2: ${v}`
}

const p = foo() as async
if (!((p as unknown) is Promise<any>)) {
    throw `not a promise?`
}

const n = await p

let x: number[] | undefined
if (x is number[]) {}

const o = {} as Record<string, string>
for ([k, v] of o) {}

const o2 = { *[Symbol.iterator]() {} }
for (x of o2) {}
